---
- hosts: localhost
  roles:
    - update-security-group

- hosts: "hdb0"
  become: true
  roles:
    - disk-setup
    - saphana-install
    - { role: xsa-install, when: install_xsa == true }
    - { role: cockpit-download, when: install_xsa == true and install_cockpit == true }

- hosts: "hdb0"
  become: true
  become_user: "{{ sap_sid|lower }}adm"
  roles:
    - { role: shine-install, when: install_xsa == true and install_shine == true }
    - { role: cockpit-install, when: install_xsa == true and install_cockpit == true }
    - { role: webide-install, when: install_xsa == true and install_webide == true }

- name: run playbook for linux bastion host
  vars:
    config_json_file: ../modules/single_node_hana/temp.json
  import_playbook: linux_bastion_host.yml

- name: run playbook for Windows bastion host
  vars:
    config_json_file: ../modules/single_node_hana/temp.json
  import_playbook: windows_bastion_host.yml